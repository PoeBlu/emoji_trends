<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-deferred@1"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
</head>

<body>

    <div>

        <div>
            <canvas id="football" width="80%" height="30%"></canvas>
        </div>
        <div>
            <canvas id="bee" width="80%" height="30%"></canvas>
        </div>

    </div>

    <script>
        var mydata;
        function makeChart(dates, title, emoji) {
            var myconfig = [{ deferred: { xOffset: '50%', delay: 1250, } }];
            var day = dates.map(function (d) {
                return d.day;
            });
            var usage = dates.map(function (d) {
                return d.usage;
            });



            Chart.defaults.global.plugins = [{ deferred: { yOffset: 500, delay: 1200, } }];
            Chart.defaults.global.responsive = true;
            Chart.defaults.global.legend = false;
            Chart.defaults.global.animation.duration = 4000;
            Chart.defaults.global.tooltips.intersect = false;
            Chart.defaults.global.tooltips.borderWidth = 3;
            Chart.defaults.global.tooltips.borderColor = 'black';
            Chart.defaults.global.tooltips.yAlign = 'bottom';
            Chart.defaults.global.tooltips.backgroundColor = 'white';
            Chart.defaults.global.tooltips.titleFontSize = 16;
            Chart.defaults.global.tooltips.titleFontColor = 'black';
            Chart.defaults.global.tooltips.bodyFontColor = '#000';
            Chart.defaults.global.tooltips.bodyFontSize = 14;
            Chart.defaults.global.tooltips.displayColors = false;
            // Chart.defaults.scales=[{yAxes: { display: false }}];
            // Chart.defaults.global.scale={xAxes:[{
            //             type: 'time',
            //             time: {
            //                 unit: 'year'
            //             },
            //             gridLines: {
            //                 display: false
            //             }
            //         }]};

            //     },
            //     gridLines: {
            //         display: false
            //     }
            // }]
            //     },
            // };

            var football = document.getElementById(title);
            new Chart(football.getContext("2d"), {
                type: ['line'],
                options: {
                    tooltips: {
                        callbacks: {
                            label: function (tooltipItem, data) {
                                return Number(tooltipItem.yLabel) + " people tweeted " + emoji;
                            }
                        }
                    }
                },
                data: {
                    labels: day,
                    datasets: [{
                        backgroundColor: 'red',
                        data: usage,
                        pointRadius: 0,
                        borderWidth: 3,
                        borderColor: 'black',
                    }]
                }
            });
        }

        Promise.all([
            d3.csv("output/football_sampled.csv"),
            d3.csv("output/bee.csv"),
        ]).then(function (files) {
            makeChart(files[0], 'football', '‚öΩ');
            makeChart(files[1], 'bee', 'üêù');
        })


    </script>

</body>

</html>